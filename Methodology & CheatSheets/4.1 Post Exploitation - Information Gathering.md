# Manual

## Linux

### General

```shell
pwd              # Get the Current working directory
hostname         # Get hostname
whoami           # Get the Logged in user
id               # Display the UID/GID & Groups
uname -a         # Print All System Info
uname -r         # Obtain Kernel Release
ifconfig -a      # Get all the network interfaces
ip a             # Get all the network interfaces
which %name%     # Find if a binary exists
locate %name%    # Locate a file (database bound)
sudo updatedb    # Update 'locate' database
find <args>      # Find a specific thing (use arguments)
ls -il           # Display info and the inode value
mount            # List Mounted Devices
umount <device>  # Unmount a device
lsof             # Lists open files used by processes
netstat -a       # Display Active Connections
sudo netstat -rn # Display routing tables

```

### Services & Processes related

```shell
# List all Services
systemctl list-units --type=service     
# Check the journals
journalctl -u <service name> --no-pager 
# List all running containers
docker ps
# View the logs of a container
docker logs
# View LXC containers
lxc-ls
# Attach to a container
lxc-attach -n <container>
```

### Backups
```shell
# Unencrypted
# Backsup to a remote server
rsync -av <local dir> user@backup_server:<remote dir>
# Fast compressed backup to remove server
rsync -avz --backup --backup-dir=/path/to/backup/folder --delete /path/to/mydirectory user@backup_server:/path/to/backup/directory
# Restore Backup
rsync -av user@remote_host:<remote dir> <local dir>
___________________________________________________________
# Encrypted 

# Using SSH
rsync -avz -e ssh <local> user@backup_server:<remote>

```

### File Related Operations
```shell
# Find SUID binaries
find / -perm 4000
```
______
## Windows

### General
```powershell
# Get Information about the operating system (buildnumber, serial, version..)
Get-WmiObject -Class win32_OperatingSystem
# Get Process Listing
Get-WmiObject -Class win32_Process
# Get Services Listing
Get-WmiObject -Class win32_Service
# Get BIOS Info
Get-WmiObject -Class win32_bios
# Get a List of running Services
Get-Service | ? {$_.Status -eq "Running"} | select -First 2 |fl
# Get the permissions of a service
Get-ACL -Path HKLM:\System\CurrentControlSet\Services\Service | Format-List
# View the Aliases configured
Get-Alias
# Set a new Alias
New-Alias -Name "Show-Files" Get-ChildItem
# Get the Execution Policy for all scopes
Get-ExecutionPolicy -List
# List Available modules
Get-Module -ListAvailable 
# Get Help on a module
Get-Help Import-Module
# Viewing the module paths
$env:PSModulePath
# Get commands with within a module
Get-Command -Module PowerSploit
# Get the local groups
Get-LocalGroup
# Get Local Users
Get-LocalUser
# Making a password object
$Password = Read-Host -AsSecureString
# Making a user account
New-LocalUser -Name "JLawrence" -NoPassword
# Modifying a user account
Set-LocalUser -Name "JLawrence" -Password $Password
# Adding a member to a local group
Add-LocalGroupMember -Group "Remote Desktop Users" -Member "JLawrence"
# List files in a directory
get-childitem -Path C:\ *.txt
# Get Properties of an object // The Get-Member is the important one
"Get-LocalUser administrator" | get-member
# Finding Intresting Files
Get-Childitem –Path C:\ -File -Recurse -ErrorAction SilentlyContinue | where {($_.Name -like "*.txt" -or $_.Name -like "*.py" -or $_.Name -like "*.ps1" -or $_.Name -like "*.md" -or $_.Name -like "*.csv")}
# Searching for content
Get-Childitem –Path C:\ -File -Recurse -ErrorAction SilentlyContinue | where {($_. Name -like "*.txt" -or $_. Name -like "*.py" -or $_. Name -like "*.ps1" -or $_. Name -like "*.md" -or $_. Name -like "*.csv")} | sls "Password","credential","key","UserName"
# Get the Command Line history
Get-Content (Get-PSReadlineOption).HistorySavePath
# Gets the clipboard data
Get-Clipboard
# Get Services
Get-Service | ft DisplayName,Status 
# Querying remote services
get-service -ComputerName <Computer Name>
# Get a list of reg keys
Get-ChildItem -Path HKLM:\SOFTWARE\Microsoft\Windows\CurrentVersion -Recurse
# Adding a reg key
New-ItemProperty -Path "<path>" -Name  "<name>" -PropertyType String -Value "<Value>"
# Deleting a reg key
Remove-ItemProperty -Path "<Path>" -Name  "<name>"
# List windows logs
Get-WinEvent -ListLog *
# Getting events
Get-WinEvent -LogName 'Security'| Select-Object -ExpandProperty Message


```

```shell
# Get general system information
systeminfo
# Get windows version and build number
ver
# Get a list of privileges
whoami /priv
# Get a list of joined groups
whoami /groups
# Get a list of domain groups
net group
# Get a list of local groups
net localgroup
# Enumerate shares
net share
# Display shared resources
net view
# Get a list of services
tasklist /svc
# List running services
net start
# Query a service for a host over the network
sc //hostname or ip of box query ServiceName
# Check the service permissions (SDDL)
sc sdshow <service name>
# List infomation about the OS
wmic os list brief
# Get the history of commands in the session
doskey /history
# Discover additional hosts
arp /a
# Recursive Where
where /R C:\ **.txt
# Finding keywords
find "password" "C:\Users\student\not-passwords.txt"
# Query Existing tasks
SCHTASKS /Query /V /FO list
# Querying a reg key
reg query HKEY_LOCAL_MACHINE\SOFTWARE\7-Zip
# Searching reg keys for a value
REG QUERY HKCU /F "Password" /t REG_SZ /S /K
# Adding a reg key value
reg add "<Path>" /v access /t REG_SZ /d "<Value>"
# Getting windows log sources
wevtutil el
# Gathering Log info
wevtutil gli "<log name>"
# Querying Events
wevtutil qe Security /c:5 /rd:true /f:text

```

## Active Directory

```powershell
# Get AD Users
Get-ADUser -Filter *
# Make an AD User
New-ADUser -Name "MTanaka" -Accountpassword $Pass -Enabled $true 
# modifying an AD User 
Set-ADUser -Identity MTanaka -Description "Descr"
# 
```
### Useful Notes
[[2. AD Research Over The Years]]

# Interesting Directories

## Linux

```shell
/var/mail # Contains the current users' mail

```

## Windows
```powershell
%SYSTEMROOT%\Temp

%TEMP%

%HOMEPATH%

```

# Interesting Files

## Linux


## Windows

```powershell
C:\Users\<USERNAME>\AppData\Roaming\Microsoft\Windows\Powershell\PSReadline\ConsoleHost_history.txt


```